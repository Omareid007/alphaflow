# ============================================================================
# AI Active Trader - Trading Configuration Example
# ============================================================================
#
# Copy this file to .env in your project root and customize the values.
# DO NOT commit .env files with real credentials to version control!
#
# Usage:
#   1. Copy this file: cp server/config/.env.example .env
#   2. Edit .env with your values
#   3. Restart the application
#
# ============================================================================

# ============================================================================
# ALPACA BROKER CONFIGURATION
# ============================================================================

# Trading Mode: 'paper' for testing, 'live' for production (CAUTION!)
# Default: paper
ALPACA_TRADING_MODE=paper

# Alpaca Paper Trading URL (for testing with fake money)
ALPACA_PAPER_URL=https://paper-api.alpaca.markets

# Alpaca Live Trading URL (REAL MONEY - USE WITH EXTREME CAUTION!)
ALPACA_LIVE_URL=https://api.alpaca.markets

# Alpaca Market Data URL (same for paper and live)
ALPACA_DATA_URL=https://data.alpaca.markets

# Alpaca WebSocket Streaming URL (same for paper and live)
ALPACA_STREAM_URL=wss://stream.data.alpaca.markets

# ============================================================================
# RISK MANAGEMENT CONFIGURATION
# ============================================================================

# Default stop loss percentage (auto-exit when position loses this much)
# Conservative: 2, Moderate: 3, Aggressive: 5
# Default: 3
DEFAULT_HARD_STOP_LOSS_PERCENT=3

# Default take profit percentage (auto-exit when position gains this much)
# Conservative: 4, Moderate: 6, Aggressive: 10
# Default: 6
DEFAULT_TAKE_PROFIT_PERCENT=6

# Maximum position size as percentage of portfolio
# Conservative: 5, Moderate: 10, Aggressive: 15
# Default: 15
DEFAULT_MAX_POSITION_SIZE_PERCENT=15

# Maximum total exposure as percentage of portfolio
# Conservative: 50, Moderate: 80, Aggressive: 200 (margin)
# 100% = fully invested, 200% = 2x leverage (margin account)
# Default: 200
DEFAULT_MAX_EXPOSURE_PERCENT=200

# ============================================================================
# ORDER RETRY CONFIGURATION
# ============================================================================

# Maximum number of retry attempts per failed order
# Range: 0-10
# Default: 3
MAX_RETRIES_PER_ORDER=3

# Base delay in milliseconds for exponential backoff
# Retry delays: base * 2^(attempt-1)
# Example with 2000ms: 2s, 4s, 8s
# Range: 100-30000
# Default: 2000
RETRY_BACKOFF_BASE_MS=2000

# Circuit breaker: number of failures before opening circuit
# Opens circuit to prevent cascading failures
# Default: 10
CIRCUIT_BREAKER_THRESHOLD=10

# Circuit breaker: time window in ms to count failures
# Default: 60000 (1 minute)
CIRCUIT_BREAKER_WINDOW_MS=60000

# Circuit breaker: cooldown period before auto-reset in ms
# Default: 300000 (5 minutes)
CIRCUIT_BREAKER_RESET_MS=300000

# ============================================================================
# ORDER EXECUTION CONFIGURATION
# ============================================================================

# Polling interval in ms to check if order is filled
# Faster = more API calls but quicker fill detection
# Range: 100-5000
# Default: 500
ORDER_FILL_POLL_INTERVAL_MS=500

# Maximum time in ms to wait for order fill before timing out
# Default: 30000 (30 seconds)
ORDER_FILL_TIMEOUT_MS=30000

# Maximum age in ms for unfilled orders before auto-cancellation
# Prevents stale orders from executing at wrong times
# Default: 300000 (5 minutes)
STALE_ORDER_TIMEOUT_MS=300000

# ============================================================================
# UNIVERSE CONFIGURATION
# ============================================================================

# Maximum number of stock symbols to analyze per cycle
# Conservative: 120, Moderate: 300, Aggressive: 500
# More symbols = more opportunities but slower analysis
# Default: 500
MAX_STOCK_SYMBOLS_PER_CYCLE=500

# Maximum number of crypto symbols to analyze per cycle
# Conservative: 20, Moderate: 50, Aggressive: 100
# Default: 100
MAX_CRYPTO_SYMBOLS_PER_CYCLE=100

# Minimum AI confidence score (0-1) to include symbol in universe
# Conservative: 0.70, Moderate: 0.60, Aggressive: 0.50
# Higher = fewer but higher quality trades
# Lower = more trades but potentially lower win rate
# Default: 0.50
MIN_CONFIDENCE_FOR_UNIVERSE=0.50

# Number of symbols to fetch per Alpaca snapshot API request
# Alpaca max: 100, Recommended: 50 for reliability
# Default: 50
ALPACA_SNAPSHOT_CHUNK_SIZE=50

# ============================================================================
# QUEUE CONFIGURATION
# ============================================================================

# Interval in ms to poll work queue for pending tasks
# Default: 2000 (2 seconds)
QUEUE_POLL_INTERVAL_MS=2000

# Maximum time in ms for a work item to complete before timing out
# Default: 60000 (1 minute)
QUEUE_POLL_TIMEOUT_MS=60000

# Interval in ms to send heartbeat signals for monitoring
# Default: 30000 (30 seconds)
HEARTBEAT_INTERVAL_MS=30000

# ============================================================================
# UAE MARKETS DATA INTEGRATION
# ============================================================================

# Dubai Pulse Open API Key (free tier)
# Get your API key: https://datahub.dubaipulse.gov.ae/
# Provides: DFM market indices and summary data
# Leave empty to use demo data
# Default: empty (demo mode)
UAE_MARKETS_API_KEY=

# Force demo mode even if API key is configured
# Set to 'true' to always use demo data
# Default: false
# UAE_MARKETS_USE_DEMO=false

# ============================================================================
# PRESET CONFIGURATIONS
# ============================================================================
#
# Uncomment one of the preset configurations below, or create your own!
#
# ============================================================================

# ----------------------------------------------------------------------------
# PRESET: Conservative (Low Risk, High Confidence)
# ----------------------------------------------------------------------------
# Use this for testing or conservative trading
#
# ALPACA_TRADING_MODE=paper
# DEFAULT_MAX_POSITION_SIZE_PERCENT=5
# DEFAULT_MAX_EXPOSURE_PERCENT=50
# DEFAULT_HARD_STOP_LOSS_PERCENT=2
# DEFAULT_TAKE_PROFIT_PERCENT=4
# MAX_STOCK_SYMBOLS_PER_CYCLE=120
# MAX_CRYPTO_SYMBOLS_PER_CYCLE=20
# MIN_CONFIDENCE_FOR_UNIVERSE=0.70

# ----------------------------------------------------------------------------
# PRESET: Moderate (Balanced Risk/Reward)
# ----------------------------------------------------------------------------
# Use this for balanced trading approach
#
# ALPACA_TRADING_MODE=paper
# DEFAULT_MAX_POSITION_SIZE_PERCENT=10
# DEFAULT_MAX_EXPOSURE_PERCENT=80
# DEFAULT_HARD_STOP_LOSS_PERCENT=3
# DEFAULT_TAKE_PROFIT_PERCENT=6
# MAX_STOCK_SYMBOLS_PER_CYCLE=300
# MAX_CRYPTO_SYMBOLS_PER_CYCLE=50
# MIN_CONFIDENCE_FOR_UNIVERSE=0.60

# ----------------------------------------------------------------------------
# PRESET: Aggressive (High Risk, Maximum Opportunities)
# ----------------------------------------------------------------------------
# Use this for maximum trading activity (DEFAULT VALUES)
#
# ALPACA_TRADING_MODE=paper
# DEFAULT_MAX_POSITION_SIZE_PERCENT=15
# DEFAULT_MAX_EXPOSURE_PERCENT=200
# DEFAULT_HARD_STOP_LOSS_PERCENT=3
# DEFAULT_TAKE_PROFIT_PERCENT=6
# MAX_STOCK_SYMBOLS_PER_CYCLE=500
# MAX_CRYPTO_SYMBOLS_PER_CYCLE=100
# MIN_CONFIDENCE_FOR_UNIVERSE=0.50

# ----------------------------------------------------------------------------
# PRESET: Production Live Trading (USE WITH EXTREME CAUTION!)
# ----------------------------------------------------------------------------
# WARNING: This uses REAL MONEY! Only use after extensive paper trading!
#
# ALPACA_TRADING_MODE=live
# DEFAULT_MAX_POSITION_SIZE_PERCENT=5
# DEFAULT_MAX_EXPOSURE_PERCENT=50
# DEFAULT_HARD_STOP_LOSS_PERCENT=2
# DEFAULT_TAKE_PROFIT_PERCENT=4
# MAX_STOCK_SYMBOLS_PER_CYCLE=120
# MAX_CRYPTO_SYMBOLS_PER_CYCLE=20
# MIN_CONFIDENCE_FOR_UNIVERSE=0.70
# MAX_RETRIES_PER_ORDER=5
# CIRCUIT_BREAKER_THRESHOLD=5

# ============================================================================
# NOTES
# ============================================================================
#
# 1. Always test configuration changes in paper mode first!
# 2. Start conservative and increase risk gradually
# 3. Monitor performance metrics before adjusting
# 4. Keep stop losses tight to limit downside risk
# 5. Never risk more than you can afford to lose
#
# ============================================================================
